<div>
  <div class="flex justify-between">
    <a class="flex items-center gap-2" routerLink="/{{lang.slug}}/catalogue/a/{{post.user_id}}">
      <img class="w-16 h-16 rounded-md" [src]="userImg" />
      <div class="flex flex-col">
        <div class="text-main font-bold text-lg">{{ userName }}</div>
        <div class="text-sm">{{ formatDate(post.created_at) }}</div>
      </div>
    </a>
    <div class="flex gap-4">
      <div>
        <div (click)="toggleFollow()" class="cursor-pointer">
          <!-- <ng-container *ngIf="!follow"> -->
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M17 20V18.3333C17 17.4493 16.5786 16.6014 15.8284 15.9763C15.0783 15.3512 14.0609 15 13 15H5C3.93913 15 2.92172 15.3512 2.17157 15.9763C1.42143 16.6014 1 17.4493 1 18.3333V20"
              stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path
              d="M9 11C11.2091 11 13 9.20914 13 7C13 4.79086 11.2091 3 9 3C6.79086 3 5 4.79086 5 7C5 9.20914 6.79086 11 9 11Z"
              stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path
              d="M22.4602 5.53044C22.2892 5.36228 22.0861 5.22888 21.8626 5.13786C21.6391 5.04685 21.3995 5 21.1576 5C20.9156 5 20.676 5.04685 20.4525 5.13786C20.229 5.22888 20.0259 5.36228 19.8549 5.53044L19.4999 5.87928L19.1449 5.53044C18.7994 5.19092 18.3309 5.00018 17.8423 5.00018C17.3537 5.00018 16.8851 5.19092 16.5396 5.53044C16.1941 5.86997 16 6.33046 16 6.81062C16 7.29078 16.1941 7.75128 16.5396 8.0908L16.8946 8.43964L19.4999 11L22.1053 8.43964L22.4602 8.0908C22.6314 7.92271 22.7671 7.72314 22.8597 7.50348C22.9523 7.28383 23 7.04839 23 6.81062C23 6.57286 22.9523 6.33742 22.8597 6.11776C22.7671 5.8981 22.6314 5.69853 22.4602 5.53044Z"
              stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <!-- </ng-container> -->
          <!-- <ng-conteainer *ngIf="follow">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M17 20V18.3333C17 17.4493 16.5786 16.6014 15.8284 15.9763C15.0783 15.3512 14.0609 15 13 15H5C3.93913 15 2.92172 15.3512 2.17157 15.9763C1.42143 16.6014 1 17.4493 1 18.3333V20"
                stroke="#0f0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              <path
                d="M9 11C11.2091 11 13 9.20914 13 7C13 4.79086 11.2091 3 9 3C6.79086 3 5 4.79086 5 7C5 9.20914 6.79086 11 9 11Z"
                stroke="#0f0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              <path
                d="M22.4602 5.53044C22.2892 5.36228 22.0861 5.22888 21.8626 5.13786C21.6391 5.04685 21.3995 5 21.1576 5C20.9156 5 20.676 5.04685 20.4525 5.13786C20.229 5.22888 20.0259 5.36228 19.8549 5.53044L19.4999 5.87928L19.1449 5.53044C18.7994 5.19092 18.3309 5.00018 17.8423 5.00018C17.3537 5.00018 16.8851 5.19092 16.5396 5.53044C16.1941 5.86997 16 6.33046 16 6.81062C16 7.29078 16.1941 7.75128 16.5396 8.0908L16.8946 8.43964L19.4999 11L22.1053 8.43964L22.4602 8.0908C22.6314 7.92271 22.7671 7.72314 22.8597 7.50348C22.9523 7.28383 23 7.04839 23 6.81062C23 6.57286 22.9523 6.33742 22.8597 6.11776C22.7671 5.8981 22.6314 5.69853 22.4602 5.53044Z"
                stroke="#0f0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </ng-conteainer> -->
        </div>
      </div>
      <div>
        <div (click)="toggleSubscribe()" class="cursor-pointer">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z"
              stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M12 8V16" stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M8 12H16" stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
      </div>
      <div>
        <div class="cursor-pointer" (click)="menu.toggle($event)">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z"
              stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path
              d="M19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11C18.4477 11 18 11.4477 18 12C18 12.5523 18.4477 13 19 13Z"
              stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path
              d="M5 13C5.55228 13 6 12.5523 6 12C6 11.4477 5.55228 11 5 11C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13Z"
              stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
      </div>
      <p-menu #menu [model]="items" [popup]="true"></p-menu>
    </div>
  </div>
  <p class="mt-2">{{ post.content }}</p>
  <div id="attachment" *ngIf="post.attachment.length != 0">
    <p-carousel [value]="post.attachment" [numVisible]="1" [numScroll]="1" [circular]="false"
      [responsiveOptions]="responsiveOptions">
      <ng-template let-item pTemplate="attachment">
        <div class="border-1 surface-border border-round m-2 text-center">
          <img [src]="getUrl(item)" *ngIf="item.type === 'image'" class="w-full object-cover">
          <video [src]="getUrl(item)" *ngIf="item.type === 'video' || item.type === 'youtube'" class="w-full"></video>
        </div>
      </ng-template>
    </p-carousel>
  </div>
  <div class="flex flex-col gap-2 divide-y divide-black/20">
    <div class="flex gap-2">
      <button (click)="toggleLike()"
        class="w-1/3 rounded-md text-main flex justify-center gap-2 bg-black/10 hover:bg-black/20 py-2 items-center">
        <!-- <ng-container *ngIf="!like"> -->
        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M6 10L10 1C10.7956 1 11.5587 1.31607 12.1213 1.87868C12.6839 2.44129 13 3.20435 13 4V8H18.66C18.9499 7.99672 19.2371 8.0565 19.5016 8.17522C19.7661 8.29393 20.0016 8.46873 20.1919 8.68751C20.3821 8.90629 20.5225 9.16382 20.6033 9.44225C20.6842 9.72068 20.7035 10.0134 20.66 10.3L19.28 19.3C19.2077 19.7769 18.9654 20.2116 18.5979 20.524C18.2304 20.8364 17.7623 21.0055 17.28 21H6M6 10V21M6 10H3C2.46957 10 1.96086 10.2107 1.58579 10.5858C1.21071 10.9609 1 11.4696 1 12V19C1 19.5304 1.21071 20.0391 1.58579 20.4142C1.96086 20.7893 2.46957 21 3 21H6"
            stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        <!-- </ng-container>
        <ng-container *ngIf="like">
          <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M6 10L10 1C10.7956 1 11.5587 1.31607 12.1213 1.87868C12.6839 2.44129 13 3.20435 13 4V8H18.66C18.9499 7.99672 19.2371 8.0565 19.5016 8.17522C19.7661 8.29393 20.0016 8.46873 20.1919 8.68751C20.3821 8.90629 20.5225 9.16382 20.6033 9.44225C20.6842 9.72068 20.7035 10.0134 20.66 10.3L19.28 19.3C19.2077 19.7769 18.9654 20.2116 18.5979 20.524C18.2304 20.8364 17.7623 21.0055 17.28 21H6M6 10V21M6 10H3C2.46957 10 1.96086 10.2107 1.58579 10.5858C1.21071 10.9609 1 11.4696 1 12V19C1 19.5304 1.21071 20.0391 1.58579 20.4142C1.96086 20.7893 2.46957 21 3 21H6"
              stroke="#0f0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </ng-container> -->
        {{ "post.content.like" | translate }} ({{post.likes.length}})
      </button>
      <button (click)="toggleComment()"
        class="w-1/3 rounded-md text-main flex justify-center gap-2 bg-black/10 hover:bg-black/20 py-2 items-center">
        <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M19.5 9.50003C19.5034 10.8199 19.1951 12.1219 18.6 13.3C17.8944 14.7118 16.8098 15.8992 15.4674 16.7293C14.1251 17.5594 12.5782 17.9994 11 18C9.68013 18.0035 8.37812 17.6951 7.2 17.1L1.5 19L3.4 13.3C2.80493 12.1219 2.49656 10.8199 2.5 9.50003C2.50061 7.92179 2.94061 6.37488 3.77072 5.03258C4.60083 3.69028 5.78825 2.6056 7.2 1.90003C8.37812 1.30496 9.68013 0.996587 11 1.00003H11.5C13.5843 1.11502 15.553 1.99479 17.0291 3.47089C18.5052 4.94699 19.385 6.91568 19.5 9.00003V9.50003Z"
            stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        {{ "post.content.comment" | translate }}({{comments.length}})
      </button>
      <button (click)="showShareLink()"
        class="w-1/3 rounded-md text-main flex justify-center gap-2 bg-black/10 hover:bg-black/20 py-2 items-center">
        <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M1 1H11V11" stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M1 11L11 1" stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>

        {{ "post.content.share" | translate }}
      </button>
    </div>
    <div class="flex flex-col gap-2 pt-2" *ngIf="showComment">
      <div class="flex gap-2" *ngFor="let c of comments">
        <img class="w-12 h-12 rounded-md flex-none mt-2" [src]="commentImage(c)" />
        <div class="rounded-md bg-gray-200 p-2 grow">
          <div class="text-main font-bold text-md">{{ commentUserName(c) }}</div>
          <div class="text-sm">{{ formatDate(c.created_at) }}</div>
          <div class="mt-2">{{c.content}}</div>
        </div>
      </div>
      <div class="flex gap-2 pt-2 items-center" *ngIf="authorized">
        <img class="w-12 h-12 rounded-md flex-none" [src]="srcMyImage" />
        <div
          class="flex rounded-3xl bg-white border-black/30 focus:ring-0 focus:border-red-700/50 border-1 grow items-center">
          <input class="bg-transparent border-none focus:ring-0 grow py-2 pl-4 pr-2" [(ngModel)]="myComment" />
          <!-- <div class="flex gap-2 mr-4">
          <div>
            <svg width="22" height="23" viewBox="0 0 22 23" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M20.4403 11.05L11.2503 20.24C10.1244 21.3659 8.59747 21.9984 7.00529 21.9984C5.41311 21.9984 3.88613 21.3659 2.76029 20.24C1.63445 19.1142 1.00195 17.5872 1.00195 15.995C1.00195 14.4029 1.63445 12.8759 2.76029 11.75L11.9503 2.56004C12.7009 1.80948 13.7188 1.38782 14.7803 1.38782C15.8417 1.38782 16.8597 1.80948 17.6103 2.56004C18.3609 3.3106 18.7825 4.32859 18.7825 5.39004C18.7825 6.4515 18.3609 7.46948 17.6103 8.22004L8.41029 17.41C8.03501 17.7853 7.52602 17.9962 6.99529 17.9962C6.46456 17.9962 5.95557 17.7853 5.58029 17.41C5.20501 17.0348 4.99418 16.5258 4.99418 15.995C4.99418 15.4643 5.20501 14.9553 5.58029 14.58L14.0703 6.10004"
                stroke="black" stroke-opacity="0.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </div>
          <div>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z"
                stroke="black" stroke-opacity="0.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              <path
                d="M8.5 10C9.32843 10 10 9.32843 10 8.5C10 7.67157 9.32843 7 8.5 7C7.67157 7 7 7.67157 7 8.5C7 9.32843 7.67157 10 8.5 10Z"
                stroke="black" stroke-opacity="0.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M21 15L16 10L5 21" stroke="black" stroke-opacity="0.5" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
          </div>
          <div>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                stroke="black" stroke-opacity="0.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M8 14C8 14 9.5 16 12 16C14.5 16 16 14 16 14" stroke="black" stroke-opacity="0.5" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round" />
              <path d="M9 9H9.01" stroke="black" stroke-opacity="0.5" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
              <path d="M15 9H15.01" stroke="black" stroke-opacity="0.5" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
          </div>
        </div> -->
        </div>
        <button class="flex-none" (click)="saveComment()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M22 2L11 13" stroke="#C10808" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="#C10808" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>

<p-dialog [header]="'post.content.share_link_header' | translate" [(visible)]="shareLinkVisible" [modal]="true"
  [style]="{ width: '30vw' }" [draggable]="false" [resizable]="false">
  <div class="flex flex-col items-end">
    <input class="border-1 rounded-md p-2 w-full" disabled [(ngModel)]="shareLinkValue" />
    <div class="w-full justify-center">
      <div class="grid grid-cols-3 gap-4 mt-4">
        <a class="flex justify-center w-full" [href]='telegramLink'>
          <img class="w-16 h-16" src="/images/telegram.png" />
        </a>
        <a class="flex justify-center w-full" [href]='facebookLink'>
          <img class="w-16 h-16" src="/images/facebook.png" />
        </a>
        <a class="flex justify-center w-full" [href]='whatsappLink'>
          <img class="w-16 h-16" src="/images/whatsapp.png" />
        </a>
      </div>
    </div>
    <div class="flex gap-2 mt-4">
      <button class="bg-main text-white rounded-md px-5 py-2 mt-2" (click)="copyShareLink()">{{"post.content.copy_share"
        |
        translate}}</button>
      <button class="bg-gray-700 text-white rounded-md px-5 py-2 mt-2" (click)="closeShareLink()">{{"common.close" |
        translate}}</button>
    </div>
  </div>
</p-dialog>
<p-toast></p-toast>
<p-confirmDialog [style]="{width: '50vw'}"></p-confirmDialog>
<p-dialog header="Register" [(visible)]="authorizeVisible" [modal]="true" [style]="{ width: '30vw' }"
  [draggable]="false" [resizable]="false">
  <div class="m-0 flex flex-col items-center">
    {{"common.register" | translate}}
    <div class="flex justify-end">
      <button class="bg-gray-700 text-white rounded-md px-5 py-2 mt-4" (click)="authorizeVisible = false">{{"common.ok" |
        translate}}</button>
    </div>
  </div>
</p-dialog>